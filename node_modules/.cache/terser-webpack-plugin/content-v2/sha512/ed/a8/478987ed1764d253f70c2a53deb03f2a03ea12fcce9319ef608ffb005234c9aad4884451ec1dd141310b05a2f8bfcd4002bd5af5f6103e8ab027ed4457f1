{"code":"!function(t,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var n=r();for(var e in n)(\"object\"==typeof exports?exports:t)[e]=n[e]}}(this,function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var i in t)n.d(e,i,function(r){return t[r]}.bind(null,i));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,\"a\",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p=\"\",n(n.s=0)}([function(t,r,n){const e=n(1),i=n(2);var u=n(3);t.exports=class{constructor(t={}){e.checkDataAction(\"Object\",t,\"option必须为对象\")&&(this.imgList=[],this.option=Object.assign({replace_image_url:\"http://ww1.sinaimg.cn/large/\",new_image_url:\"https://xxx.com/目录地址/\",add_end:\"\",read_markdown_src:\"./source\",down_img_src:\"./markdown_img_src\",copy_item_data:\"copy_item_obkoro\",var_number:0,is_link:!0,test:!0,write_file_time:3e3,downFileNameCallBack:null,filter_item:[\".git\"]},t),this.option.copy_item_data&&(this.copyNow=!0,this.copyDir(this.option.read_markdown_src,this.option.copy_item_data,t=>{console.log(\"复制文件夹报错：\",t)})))}checkDownImg(){this.readFile(this.option.read_markdown_src),console.log(`图片提取完成共：${this.imgList.length}张`,this.imgList),this.downImg()}replaceMarkdown(){let t=0;this.copyNow&&(t=this.option.write_file_time,this.copyNow=!1),setTimeout(()=>{this.readFile(this.option.read_markdown_src,!0),console.log(\"修改图片地址成功\")},t)}reg(t){let r=t=>t=(t=t.replace(/\\//g,\"\\\\/\")).replace(/\\./g,\"\\\\.\"),n=this.option.replace_image_url,e=\"!\";return this.option.is_link&&(e=\"\"),{sectionUrl:new RegExp(`(${r(n)}${(t=>{let r=\"\";return t>0?(r+=\".*\\\\/\".repeat(t),r+=\")\"):r=\")\",r})(this.option.var_number)}`,\"g\"),allUrl:new RegExp(`${e}\\\\[(.*)\\\\]\\\\((${r(this.option.replace_image_url)}.*?)\\\\)`,\"g\")}[t]}readFile(t,r=!1){if(!e.checkDataAction(\"String\",t))return;var n=i.readdirSync(t);let u=this.reg(\"allUrl\");n.forEach(n=>{let e=`${t}/${n}`;if(i.statSync(e).isDirectory()){if(!this.option.filter_item.includes(e))return this.readFile(e,r)}else if(-1!==n.indexOf(\".md\")){let t,n=i.readFileSync(e,\"utf-8\"),o=!1;for(;null!==(t=u.exec(n));){let e=t[2];if(-1!==e.indexOf(this.option.replace_image_url))if(r)try{let t=this.reg(\"sectionUrl\"),r=e.split(t);const i=this.fileNameFormat(r[2]);let u=`${this.option.new_image_url}${i}`;this.option.add_end&&(u+=this.option.add_end),o=!0,n=n.replace(e,u)}catch(t){throw`请检查new_image_url、var_number的设置：${t}`}else this.imgList.includes(e)||this.imgList.push(e)}r&&o&&(this.option.test?console.log(\"测试模式，不修改文件：\",e):i.writeFile(e,n,\"utf-8\",()=>{console.log(\"修改成功\",e)}))}})}downImg(){this.mkdirSync();let t=0;u.mapSeries(this.imgList,(r,n)=>{setTimeout(()=>{let e=this.reg(\"sectionUrl\"),i=r.split(e);try{if(i[2]){t++;const n=this.fileNameFormat(i[2]);this.downloadPic(r,`${this.option.down_img_src}/${n}`)}n(null,r)}catch(t){n(t,r)}},400)},(r,n)=>{if(r)throw r;console.log(\"图片下载完成：\",n,t)})}fileNameFormat(t){if(null===this.option.downFileNameCallBack){const r=/^(\\w+)/,n=t.match(r);n&&n[1]&&(t=n[1])}else{if(\"[object Function]\"!==Object.prototype.toString.call(this.option.downFileNameCallBack))throw\"处理图片名错误:\";if(\"string\"!=typeof(t=this.option.downFileNameCallBack(t)))throw\"处理图片名错误:\"}return t}downloadPic(t,r){request(t).pipe(i.createWriteStream(r)).on(\"close\",()=>{console.log(\"pic saved!\",t)})}mkdirSync(){try{i.statSync(this.option.down_img_src).isDirectory()||i.mkdirSync(this.option.down_img_src,{recursive:!0})}catch(t){i.mkdirSync(this.option.down_img_src,{recursive:!0})}}copyDir(t,r,n){i.access(r,n=>{n?i.mkdir(r,{recursive:!0},n=>{if(n)throw n;e(null,t,r)}):this.copyNow=!1});var e=(t,r,e)=>{t?n(t):i.readdir(r,(t,u)=>{t?n(t):u.forEach(t=>{var u=r+\"/\"+t,o=e+\"/\"+t;i.stat(u,(t,r)=>{t?n(t):r.isFile()?i.readFile(u,(t,r)=>{if(t)throw t;i.writeFile(o,r,t=>{if(t)throw`文件拷贝失败：${t}`;console.log(\"拷贝\",o)})}):r.isDirectory()&&this.copyDir(u,o,n)})})})}}updateOption(t={}){e.checkDataAction(\"Object\",t,\"updateOption的参数为对象\")&&(this.option=Object.assign(this.option,t))}}},function(t,r){t.exports={checkDataAction:(t,r,n=r)=>{if(((t,r)=>!(!t||!r)&&(\"String\"===t?\"string\"==typeof r:\"Object\"===t?\"[object Object]\"===Object.prototype.toString.call(r):\"number\"===t?\"number\"==typeof r:\"function\"===t&&\"[object Function]\"===Object.prototype.toString.call(r)))(t,r))return!0;console.error(\"检查数据出错：\",n)}}},function(t,r){},function(t,r,n){\"use strict\";function e(t,...r){return(...n)=>t(...r,...n)}function i(t){return function(...r){var n=r.pop();return t.call(this,r,n)}}n.r(r),n.d(r,\"apply\",function(){return e}),n.d(r,\"applyEach\",function(){return F}),n.d(r,\"applyEachSeries\",function(){return B}),n.d(r,\"asyncify\",function(){return s}),n.d(r,\"auto\",function(){return M}),n.d(r,\"autoInject\",function(){return R}),n.d(r,\"cargo\",function(){return W}),n.d(r,\"cargoQueue\",function(){return G}),n.d(r,\"compose\",function(){return K}),n.d(r,\"concat\",function(){return Z}),n.d(r,\"concatLimit\",function(){return Y}),n.d(r,\"concatSeries\",function(){return tt}),n.d(r,\"constant\",function(){return rt}),n.d(r,\"detect\",function(){return et}),n.d(r,\"detectLimit\",function(){return it}),n.d(r,\"detectSeries\",function(){return ut}),n.d(r,\"dir\",function(){return at}),n.d(r,\"doUntil\",function(){return ft}),n.d(r,\"doWhilst\",function(){return ct}),n.d(r,\"each\",function(){return lt}),n.d(r,\"eachLimit\",function(){return ht}),n.d(r,\"eachOf\",function(){return x}),n.d(r,\"eachOfLimit\",function(){return j}),n.d(r,\"eachOfSeries\",function(){return I}),n.d(r,\"eachSeries\",function(){return pt}),n.d(r,\"ensureAsync\",function(){return dt}),n.d(r,\"every\",function(){return mt}),n.d(r,\"everyLimit\",function(){return yt}),n.d(r,\"everySeries\",function(){return vt}),n.d(r,\"filter\",function(){return St}),n.d(r,\"filterLimit\",function(){return _t}),n.d(r,\"filterSeries\",function(){return kt}),n.d(r,\"forever\",function(){return Et}),n.d(r,\"groupBy\",function(){return Ot}),n.d(r,\"groupByLimit\",function(){return jt}),n.d(r,\"groupBySeries\",function(){return Lt}),n.d(r,\"log\",function(){return xt}),n.d(r,\"map\",function(){return A}),n.d(r,\"mapLimit\",function(){return X}),n.d(r,\"mapSeries\",function(){return T}),n.d(r,\"mapValues\",function(){return Ft}),n.d(r,\"mapValuesLimit\",function(){return At}),n.d(r,\"mapValuesSeries\",function(){return It}),n.d(r,\"memoize\",function(){return Tt}),n.d(r,\"nextTick\",function(){return Bt}),n.d(r,\"parallel\",function(){return $t}),n.d(r,\"parallelLimit\",function(){return Mt}),n.d(r,\"priorityQueue\",function(){return zt}),n.d(r,\"queue\",function(){return Nt}),n.d(r,\"race\",function(){return Rt}),n.d(r,\"reduce\",function(){return H}),n.d(r,\"reduceRight\",function(){return qt}),n.d(r,\"reflect\",function(){return Vt}),n.d(r,\"reflectAll\",function(){return Qt}),n.d(r,\"reject\",function(){return Gt}),n.d(r,\"rejectLimit\",function(){return Ht}),n.d(r,\"rejectSeries\",function(){return Jt}),n.d(r,\"retry\",function(){return Zt}),n.d(r,\"retryable\",function(){return tr}),n.d(r,\"seq\",function(){return J}),n.d(r,\"series\",function(){return rr}),n.d(r,\"setImmediate\",function(){return f}),n.d(r,\"some\",function(){return nr}),n.d(r,\"someLimit\",function(){return er}),n.d(r,\"someSeries\",function(){return ir}),n.d(r,\"sortBy\",function(){return ur}),n.d(r,\"timeout\",function(){return or}),n.d(r,\"times\",function(){return cr}),n.d(r,\"timesLimit\",function(){return ar}),n.d(r,\"timesSeries\",function(){return fr}),n.d(r,\"transform\",function(){return sr}),n.d(r,\"tryEach\",function(){return lr}),n.d(r,\"unmemoize\",function(){return hr}),n.d(r,\"until\",function(){return dr}),n.d(r,\"waterfall\",function(){return mr}),n.d(r,\"whilst\",function(){return pr}),n.d(r,\"all\",function(){return mt}),n.d(r,\"allLimit\",function(){return yt}),n.d(r,\"allSeries\",function(){return vt}),n.d(r,\"any\",function(){return nr}),n.d(r,\"anyLimit\",function(){return er}),n.d(r,\"anySeries\",function(){return ir}),n.d(r,\"find\",function(){return et}),n.d(r,\"findLimit\",function(){return it}),n.d(r,\"findSeries\",function(){return ut}),n.d(r,\"flatMap\",function(){return Z}),n.d(r,\"flatMapLimit\",function(){return Y}),n.d(r,\"flatMapSeries\",function(){return tt}),n.d(r,\"forEach\",function(){return lt}),n.d(r,\"forEachSeries\",function(){return pt}),n.d(r,\"forEachLimit\",function(){return ht}),n.d(r,\"forEachOf\",function(){return x}),n.d(r,\"forEachOfSeries\",function(){return I}),n.d(r,\"forEachOfLimit\",function(){return j}),n.d(r,\"inject\",function(){return H}),n.d(r,\"foldl\",function(){return H}),n.d(r,\"foldr\",function(){return qt}),n.d(r,\"select\",function(){return St}),n.d(r,\"selectLimit\",function(){return _t}),n.d(r,\"selectSeries\",function(){return kt}),n.d(r,\"wrapSync\",function(){return s}),n.d(r,\"during\",function(){return pr}),n.d(r,\"doDuring\",function(){return ct});var u=\"function\"==typeof setImmediate&&setImmediate,o=\"object\"==typeof process&&\"function\"==typeof process.nextTick;function a(t){setTimeout(t,0)}function c(t){return(r,...n)=>t(()=>r(...n))}var f=c(u?setImmediate:o?process.nextTick:a);function s(t){return p(t)?function(...r){const n=r.pop();return l(t.apply(this,r),n)}:i(function(r,n){var e;try{e=t.apply(this,r)}catch(t){return n(t)}if(e&&\"function\"==typeof e.then)return l(e,n);n(null,e)})}function l(t,r){return t.then(t=>{h(r,null,t)},t=>{h(r,t&&t.message?t:new Error(t))})}function h(t,r,n){try{t(r,n)}catch(t){f(t=>{throw t},t)}}function p(t){return\"AsyncFunction\"===t[Symbol.toStringTag]}function d(t){if(\"function\"!=typeof t)throw new Error(\"expected a function\");return p(t)?s(t):t}function m(t,r=t.length){if(!r)throw new Error(\"arity is undefined\");function n(...n){return\"function\"==typeof n[r-1]?t.apply(this,n):new Promise((e,i)=>{n[r-1]=(t,...r)=>{if(t)return i(t);e(r.length>1?r:r[0])},t.apply(this,n)})}return Object.defineProperty(n,\"name\",{value:`awaitable(${t.name})`}),n}function y(t){return function(r,...n){return m(function(e){var i=this;return t(r,(t,r)=>{d(t).apply(i,n.concat(r))},e)})}}function v(t,r,n,e){r=r||[];var i=[],u=0,o=d(n);return t(r,(t,r,n)=>{var e=u++;o(t,(t,r)=>{i[e]=r,n(t)})},t=>{e(t,i)})}function g(t){return t&&\"number\"==typeof t.length&&t.length>=0&&t.length%1==0}const w={};function b(t){function r(...r){if(null!==t){var n=t;t=null,n.apply(this,r)}}return Object.assign(r,t),r}function S(t){if(g(t))return function(t){var r=-1,n=t.length;return function(){return++r<n?{value:t[r],key:r}:null}}(t);var r,n,e,i,u=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}(t);return u?function(t){var r=-1;return function(){var n=t.next();return n.done?null:(r++,{value:n.value,key:r})}}(u):(n=(r=t)?Object.keys(r):[],e=-1,i=n.length,function(){var t=n[++e];return e<i?{value:r[t],key:t}:null})}function _(t){return function(...r){if(null===t)throw new Error(\"Callback was already called.\");var n=t;t=null,n.apply(this,r)}}function k(t,r,n,e){let i=!1,u=!1,o=!1,a=0,c=0;function f(){a>=r||o||i||(o=!0,t.next().then(({value:t,done:r})=>{if(!u&&!i){if(o=!1,r)return i=!0,void(a<=0&&e(null));a++,n(t,c,s),c++,f()}}).catch(l))}function s(t,r){if(a-=1,!u)return t?l(t):!1===t?(i=!0,void(u=!0)):r===w||i&&a<=0?(i=!0,e(null)):void f()}function l(t){u||(o=!1,i=!0,e(t))}f()}var E=t=>(r,n,e)=>{if(e=b(e),t<=0)throw new RangeError(\"concurrency limit cannot be less than 1\");if(!r)return e(null);if(function(t){return\"AsyncGenerator\"===t[Symbol.toStringTag]}(r))return k(r,t,n,e);if(function(t){return\"function\"==typeof t[Symbol.asyncIterator]}(r))return k(r[Symbol.asyncIterator](),t,n,e);var i=S(r),u=!1,o=!1,a=0,c=!1;function f(t,r){if(!o)if(a-=1,t)u=!0,e(t);else if(!1===t)u=!0,o=!0;else{if(r===w||u&&a<=0)return u=!0,e(null);c||s()}}function s(){for(c=!0;a<t&&!u;){var r=i();if(null===r)return u=!0,void(a<=0&&e(null));a+=1,n(r.value,r.key,_(f))}c=!1}s()};var j=m(function(t,r,n,e){return E(r)(t,d(n),e)},4);function O(t,r,n){n=b(n);var e=0,i=0,{length:u}=t,o=!1;function a(t,r){!1===t&&(o=!0),!0!==o&&(t?n(t):++i!==u&&r!==w||n(null))}for(0===u&&n(null);e<u;e++)r(t[e],e,_(a))}function L(t,r,n){return j(t,1/0,r,n)}var x=m(function(t,r,n){return(g(t)?O:L)(t,d(r),n)},3);var A=m(function(t,r,n){return v(x,t,r,n)},3),F=y(A);var I=m(function(t,r,n){return j(t,1,r,n)},3);var T=m(function(t,r,n){return v(I,t,r,n)},3),B=y(T);const D=Symbol(\"promiseCallback\");function $(){let t,r;function n(n,...e){if(n)return r(n);t(e.length>1?e:e[0])}return n[D]=new Promise((n,e)=>{t=n,r=e}),n}function M(t,r,n){\"number\"!=typeof r&&(n=r,r=null),n=b(n||$());var e=Object.keys(t).length;if(!e)return n(null);r||(r=e);var i={},u=0,o=!1,a=!1,c=Object.create(null),f=[],s=[],l={};function h(t,r){f.push(()=>(function(t,r){if(a)return;var e=_((r,...e)=>{if(u--,!1!==r)if(e.length<2&&([e]=e),r){var f={};if(Object.keys(i).forEach(t=>{f[t]=i[t]}),f[t]=e,a=!0,c=Object.create(null),o)return;n(r,f)}else i[t]=e,function(t){(c[t]||[]).forEach(t=>t()),p()}(t);else o=!0});u++;var f=d(r[r.length-1]);r.length>1?f(i,e):f(e)})(t,r))}function p(){if(!o){if(0===f.length&&0===u)return n(null,i);for(;f.length&&u<r;){f.shift()()}}}function m(r){var n=[];return Object.keys(t).forEach(e=>{const i=t[e];Array.isArray(i)&&i.indexOf(r)>=0&&n.push(e)}),n}return Object.keys(t).forEach(r=>{var n=t[r];if(!Array.isArray(n))return h(r,[n]),void s.push(r);var e=n.slice(0,n.length-1),i=e.length;if(0===i)return h(r,n),void s.push(r);l[r]=i,e.forEach(u=>{if(!t[u])throw new Error(\"async.auto task `\"+r+\"` has a non-existent dependency `\"+u+\"` in \"+e.join(\", \"));!function(t,r){var n=c[t];n||(n=c[t]=[]);n.push(r)}(u,()=>{0===--i&&h(r,n)})})}),function(){var t,r=0;for(;s.length;)t=s.pop(),r++,m(t).forEach(t=>{0==--l[t]&&s.push(t)});if(r!==e)throw new Error(\"async.auto cannot execute tasks due to a recursive dependency\")}(),p(),n[D]}var N=/^(?:async\\s+)?(?:function)?\\s*\\w*\\s*\\(\\s*([^)]+)\\s*\\)(?:\\s*{)/,P=/^(?:async\\s+)?\\(?\\s*([^)=]+)\\s*\\)?(?:\\s*=>)/,C=/,/,U=/(=.+)?(\\s*)$/,z=/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm;function R(t,r){var n={};return Object.keys(t).forEach(r=>{var e,i=t[r],u=p(i),o=!u&&1===i.length||u&&0===i.length;if(Array.isArray(i))e=[...i],i=e.pop(),n[r]=e.concat(e.length>0?a:i);else if(o)n[r]=i;else{if(e=function(t){const r=t.toString().replace(z,\"\");let n=r.match(N);if(n||(n=r.match(P)),!n)throw new Error(\"could not parse args in autoInject\\nSource:\\n\"+r);let[,e]=n;return e.replace(/\\s/g,\"\").split(C).map(t=>t.replace(U,\"\").trim())}(i),0===i.length&&!u&&0===e.length)throw new Error(\"autoInject task functions require explicit parameters.\");u||e.pop(),n[r]=e.concat(a)}function a(t,r){var n=e.map(r=>t[r]);n.push(r),d(i)(...n)}}),M(n,r)}class q{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,r){r.prev=t,r.next=t.next,t.next?t.next.prev=r:this.tail=r,t.next=r,this.length+=1}insertBefore(t,r){r.prev=t.prev,r.next=t,t.prev?t.prev.next=r:this.head=r,t.prev=r,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):V(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):V(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var r=this.head;r;){var{next:n}=r;t(r)&&this.removeLink(r),r=n}return this}}function V(t,r){t.length=1,t.head=t.tail=r}function Q(t,r,n){if(null==r)r=1;else if(0===r)throw new RangeError(\"Concurrency must not be zero\");var e=d(t),i=0,u=[];const o={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function a(t,r){return t?r?void(o[t]=o[t].filter(t=>t!==r)):o[t]=[]:Object.keys(o).forEach(t=>o[t]=[])}function c(t,...r){o[t].forEach(t=>t(...r))}var s=!1;function l(t,r,n,e){if(null!=e&&\"function\"!=typeof e)throw new Error(\"task callback must be a function\");var i,u;function o(t,...r){return t?n?u(t):i():r.length<=1?i(r[0]):void i(r)}v.started=!0;var a={data:t,callback:n?o:e||o};if(r?v._tasks.unshift(a):v._tasks.push(a),s||(s=!0,f(()=>{s=!1,v.process()})),n||!e)return new Promise((t,r)=>{i=t,u=r})}function h(t){return function(r,...n){i-=1;for(var e=0,o=t.length;e<o;e++){var a=t[e],f=u.indexOf(a);0===f?u.shift():f>0&&u.splice(f,1),a.callback(r,...n),null!=r&&c(\"error\",r,a.data)}i<=v.concurrency-v.buffer&&c(\"unsaturated\"),v.idle()&&c(\"drain\"),v.process()}}function p(t){return!(0!==t.length||!v.idle())&&(f(()=>c(\"drain\")),!0)}const m=t=>r=>{if(!r)return new Promise((r,n)=>{!function(t,r){const n=(...e)=>{a(t,n),r(...e)};o[t].push(n)}(t,(t,e)=>{if(t)return n(t);r(e)})});a(t),function(t,r){o[t].push(r)}(t,r)};var y=!1,v={_tasks:new q,*[Symbol.iterator](){yield*v._tasks[Symbol.iterator]()},concurrency:r,payload:n,buffer:r/4,started:!1,paused:!1,push(t,r){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!1,!1,r))}return l(t,!1,!1,r)},pushAsync(t,r){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!1,!0,r))}return l(t,!1,!0,r)},kill(){a(),v._tasks.empty()},unshift(t,r){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!0,!1,r))}return l(t,!0,!1,r)},unshiftAsync(t,r){if(Array.isArray(t)){if(p(t))return;return t.map(t=>l(t,!0,!0,r))}return l(t,!0,!0,r)},remove(t){v._tasks.remove(t)},process(){if(!y){for(y=!0;!v.paused&&i<v.concurrency&&v._tasks.length;){var t=[],r=[],n=v._tasks.length;v.payload&&(n=Math.min(n,v.payload));for(var o=0;o<n;o++){var a=v._tasks.shift();t.push(a),u.push(a),r.push(a.data)}i+=1,0===v._tasks.length&&c(\"empty\"),i===v.concurrency&&c(\"saturated\");var f=_(h(t));e(r,f)}y=!1}},length:()=>v._tasks.length,running:()=>i,workersList:()=>u,idle:()=>v._tasks.length+i===0,pause(){v.paused=!0},resume(){!1!==v.paused&&(v.paused=!1,f(v.process))}};return Object.defineProperties(v,{saturated:{writable:!1,value:m(\"saturated\")},unsaturated:{writable:!1,value:m(\"unsaturated\")},empty:{writable:!1,value:m(\"empty\")},drain:{writable:!1,value:m(\"drain\")},error:{writable:!1,value:m(\"error\")}}),v}function W(t,r){return Q(t,1,r)}function G(t,r,n){return Q(t,r,n)}var H=m(function(t,r,n,e){e=b(e);var i=d(n);return I(t,(t,n,e)=>{i(r,t,(t,n)=>{r=n,e(t)})},t=>e(t,r))},4);function J(...t){var r=t.map(d);return function(...t){var n=this,e=t[t.length-1];return\"function\"==typeof e?t.pop():e=$(),H(r,t,(t,r,e)=>{r.apply(n,t.concat((t,...r)=>{e(t,r)}))},(t,r)=>e(t,...r)),e[D]}}function K(...t){return J(...t.reverse())}var X=m(function(t,r,n,e){return v(E(r),t,n,e)},4);var Y=m(function(t,r,n,e){var i=d(n);return X(t,r,(t,r)=>{i(t,(t,...n)=>t?r(t):r(t,n))},(t,r)=>{for(var n=[],i=0;i<r.length;i++)r[i]&&(n=n.concat(...r[i]));return e(t,n)})},4);var Z=m(function(t,r,n){return Y(t,1/0,r,n)},3);var tt=m(function(t,r,n){return Y(t,1,r,n)},3);function rt(...t){return function(...r){return r.pop()(null,...t)}}function nt(t,r){return(n,e,i,u)=>{var o,a=!1;const c=d(i);n(e,(n,e,i)=>{c(n,(e,u)=>e||!1===e?i(e):t(u)&&!o?(a=!0,o=r(!0,n),i(null,w)):void i())},t=>{if(t)return u(t);u(null,a?o:r(!1))})}}var et=m(function(t,r,n){return nt(t=>t,(t,r)=>r)(x,t,r,n)},3);var it=m(function(t,r,n,e){return nt(t=>t,(t,r)=>r)(E(r),t,n,e)},4);var ut=m(function(t,r,n){return nt(t=>t,(t,r)=>r)(E(1),t,r,n)},3);function ot(t){return(r,...n)=>d(r)(...n,(r,...n)=>{\"object\"==typeof console&&(r?console.error&&console.error(r):console[t]&&n.forEach(r=>console[t](r)))})}var at=ot(\"dir\");var ct=m(function(t,r,n){n=_(n);var e,i=d(t),u=d(r);function o(t,...r){if(t)return n(t);!1!==t&&(e=r,u(...r,a))}function a(t,r){return t?n(t):!1!==t?r?void i(o):n(null,...e):void 0}return a(null,!0)},3);function ft(t,r,n){const e=d(r);return ct(t,(...t)=>{const r=t.pop();e(...t,(t,n)=>r(t,!n))},n)}function st(t){return(r,n,e)=>t(r,e)}var lt=m(function(t,r,n){return x(t,st(d(r)),n)},3);var ht=m(function(t,r,n,e){return E(r)(t,st(d(n)),e)},4);var pt=m(function(t,r,n){return ht(t,1,r,n)},3);function dt(t){return p(t)?t:function(...r){var n=r.pop(),e=!0;r.push((...t)=>{e?f(()=>n(...t)):n(...t)}),t.apply(this,r),e=!1}}var mt=m(function(t,r,n){return nt(t=>!t,t=>!t)(x,t,r,n)},3);var yt=m(function(t,r,n,e){return nt(t=>!t,t=>!t)(E(r),t,n,e)},4);var vt=m(function(t,r,n){return nt(t=>!t,t=>!t)(I,t,r,n)},3);function gt(t,r,n,e){var i=new Array(r.length);t(r,(t,r,e)=>{n(t,(t,n)=>{i[r]=!!n,e(t)})},t=>{if(t)return e(t);for(var n=[],u=0;u<r.length;u++)i[u]&&n.push(r[u]);e(null,n)})}function wt(t,r,n,e){var i=[];t(r,(t,r,e)=>{n(t,(n,u)=>{if(n)return e(n);u&&i.push({index:r,value:t}),e(n)})},t=>{if(t)return e(t);e(null,i.sort((t,r)=>t.index-r.index).map(t=>t.value))})}function bt(t,r,n,e){return(g(r)?gt:wt)(t,r,d(n),e)}var St=m(function(t,r,n){return bt(x,t,r,n)},3);var _t=m(function(t,r,n,e){return bt(E(r),t,n,e)},4);var kt=m(function(t,r,n){return bt(I,t,r,n)},3);var Et=m(function(t,r){var n=_(r),e=d(dt(t));return function t(r){if(r)return n(r);!1!==r&&e(t)}()},2);var jt=m(function(t,r,n,e){var i=d(n);return X(t,r,(t,r)=>{i(t,(n,e)=>n?r(n):r(n,{key:e,val:t}))},(t,r)=>{for(var n={},{hasOwnProperty:i}=Object.prototype,u=0;u<r.length;u++)if(r[u]){var{key:o}=r[u],{val:a}=r[u];i.call(n,o)?n[o].push(a):n[o]=[a]}return e(t,n)})},4);function Ot(t,r,n){return jt(t,1/0,r,n)}function Lt(t,r,n){return jt(t,1,r,n)}var xt=ot(\"log\");var At=m(function(t,r,n,e){e=b(e);var i={},u=d(n);return E(r)(t,(t,r,n)=>{u(t,r,(t,e)=>{if(t)return n(t);i[r]=e,n(t)})},t=>e(t,i))},4);function Ft(t,r,n){return At(t,1/0,r,n)}function It(t,r,n){return At(t,1,r,n)}function Tt(t,r=(t=>t)){var n=Object.create(null),e=Object.create(null),u=d(t),o=i((t,i)=>{var o=r(...t);o in n?f(()=>i(null,...n[o])):o in e?e[o].push(i):(e[o]=[i],u(...t,(t,...r)=>{t||(n[o]=r);var i=e[o];delete e[o];for(var u=0,a=i.length;u<a;u++)i[u](t,...r)}))});return o.memo=n,o.unmemoized=t,o}var Bt=c(o?process.nextTick:u?setImmediate:a),Dt=m((t,r,n)=>{var e=g(r)?[]:{};t(r,(t,r,n)=>{d(t)((t,...i)=>{i.length<2&&([i]=i),e[r]=i,n(t)})},t=>n(t,e))},3);function $t(t,r){return Dt(x,t,r)}function Mt(t,r,n){return Dt(E(r),t,n)}function Nt(t,r){var n=d(t);return Q((t,r)=>{n(t[0],r)},r,1)}class Pt{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let r;for(;t>0&&Ut(this.heap[t],this.heap[r=Ct(t)]);){let n=this.heap[t];this.heap[t]=this.heap[r],this.heap[r]=n,t=r}}percDown(t){let r;for(;(r=1+(t<<1))<this.heap.length&&(r+1<this.heap.length&&Ut(this.heap[r+1],this.heap[r])&&(r+=1),!Ut(this.heap[t],this.heap[r]));){let n=this.heap[t];this.heap[t]=this.heap[r],this.heap[r]=n,t=r}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let r=0;for(let n=0;n<this.heap.length;n++)t(this.heap[n])||(this.heap[r]=this.heap[n],r++);this.heap.splice(r);for(let t=Ct(this.heap.length-1);t>=0;t--)this.percDown(t);return this}}function Ct(t){return(t+1>>1)-1}function Ut(t,r){return t.priority!==r.priority?t.priority<r.priority:t.pushCount<r.pushCount}function zt(t,r){var n=Nt(t,r);return n._tasks=new Pt,n.push=function(t,r=0,e=(()=>{})){if(\"function\"!=typeof e)throw new Error(\"task callback must be a function\");if(n.started=!0,Array.isArray(t)||(t=[t]),0===t.length&&n.idle())return f(()=>n.drain());for(var i=0,u=t.length;i<u;i++){var o={data:t[i],priority:r,callback:e};n._tasks.push(o)}f(n.process)},delete n.unshift,n}var Rt=m(function(t,r){if(r=b(r),!Array.isArray(t))return r(new TypeError(\"First argument to race must be an array of functions\"));if(!t.length)return r();for(var n=0,e=t.length;n<e;n++)d(t[n])(r)},2);function qt(t,r,n,e){var i=[...t].reverse();return H(i,r,n,e)}function Vt(t){var r=d(t);return i(function(t,n){return t.push((t,...r)=>{let e={};if(t&&(e.error=t),r.length>0){var i=r;r.length<=1&&([i]=r),e.value=i}n(null,e)}),r.apply(this,t)})}function Qt(t){var r;return Array.isArray(t)?r=t.map(Vt):(r={},Object.keys(t).forEach(n=>{r[n]=Vt.call(this,t[n])})),r}function Wt(t,r,n,e){const i=d(n);return bt(t,r,(t,r)=>{i(t,(t,n)=>{r(t,!n)})},e)}var Gt=m(function(t,r,n){return Wt(x,t,r,n)},3);var Ht=m(function(t,r,n,e){return Wt(E(r),t,n,e)},4);var Jt=m(function(t,r,n){return Wt(I,t,r,n)},3);function Kt(t){return function(){return t}}const Xt=5,Yt=0;function Zt(t,r,n){var e={times:Xt,intervalFunc:Kt(Yt)};if(arguments.length<3&&\"function\"==typeof t?(n=r||$(),r=t):(!function(t,r){if(\"object\"==typeof r)t.times=+r.times||Xt,t.intervalFunc=\"function\"==typeof r.interval?r.interval:Kt(+r.interval||Yt),t.errorFilter=r.errorFilter;else{if(\"number\"!=typeof r&&\"string\"!=typeof r)throw new Error(\"Invalid arguments for async.retry\");t.times=+r||Xt}}(e,t),n=n||$()),\"function\"!=typeof r)throw new Error(\"Invalid arguments for async.retry\");var i=d(r),u=1;return function t(){i((r,...i)=>{!1!==r&&(r&&u++<e.times&&(\"function\"!=typeof e.errorFilter||e.errorFilter(r))?setTimeout(t,e.intervalFunc(u-1)):n(r,...i))})}(),n[D]}function tr(t,r){r||(r=t,t=null);let n=t&&t.arity||r.length;p(r)&&(n+=1);var e=d(r);return i((r,i)=>{function u(t){e(...r,t)}return(r.length<n-1||null==i)&&(r.push(i),i=$()),t?Zt(t,u,i):Zt(u,i),i[D]})}function rr(t,r){return Dt(I,t,r)}var nr=m(function(t,r,n){return nt(Boolean,t=>t)(x,t,r,n)},3);var er=m(function(t,r,n,e){return nt(Boolean,t=>t)(E(r),t,n,e)},4);var ir=m(function(t,r,n){return nt(Boolean,t=>t)(I,t,r,n)},3);var ur=m(function(t,r,n){var e=d(r);return A(t,(t,r)=>{e(t,(n,e)=>{if(n)return r(n);r(n,{value:t,criteria:e})})},(t,r)=>{if(t)return n(t);n(null,r.sort(i).map(t=>t.value))});function i(t,r){var n=t.criteria,e=r.criteria;return n<e?-1:n>e?1:0}},3);function or(t,r,n){var e=d(t);return i((i,u)=>{var o,a=!1;i.push((...t)=>{a||(u(...t),clearTimeout(o))}),o=setTimeout(function(){var r=t.name||\"anonymous\",e=new Error('Callback function \"'+r+'\" timed out.');e.code=\"ETIMEDOUT\",n&&(e.info=n),a=!0,u(e)},r),e(...i)})}function ar(t,r,n,e){var i=d(n);return X(function(t){for(var r=Array(t);t--;)r[t]=t;return r}(t),r,i,e)}function cr(t,r,n){return ar(t,1/0,r,n)}function fr(t,r,n){return ar(t,1,r,n)}function sr(t,r,n,e){arguments.length<=3&&\"function\"==typeof r&&(e=n,n=r,r=Array.isArray(t)?[]:{}),e=b(e||$());var i=d(n);return x(t,(t,n,e)=>{i(r,t,n,e)},t=>e(t,r)),e[D]}var lr=m(function(t,r){var n,e=null;return pt(t,(t,r)=>{d(t)((t,...i)=>{if(!1===t)return r(t);i.length<2?[n]=i:n=i,e=t,r(t?null:{})})},()=>r(e,n))});function hr(t){return(...r)=>(t.unmemoized||t)(...r)}var pr=m(function(t,r,n){n=_(n);var e=d(r),i=d(t),u=[];function o(t,...r){if(t)return n(t);u=r,!1!==t&&i(a)}function a(t,r){return t?n(t):!1!==t?r?void e(o):n(null,...u):void 0}return i(a)},3);function dr(t,r,n){const e=d(t);return pr(t=>e((r,n)=>t(r,!n)),r,n)}var mr=m(function(t,r){if(r=b(r),!Array.isArray(t))return r(new Error(\"First argument to waterfall must be an array of functions\"));if(!t.length)return r();var n=0;function e(r){d(t[n++])(...r,_(i))}function i(i,...u){if(!1!==i)return i||n===t.length?r(i,...u):void e(u)}e([])}),yr={apply:e,applyEach:F,applyEachSeries:B,asyncify:s,auto:M,autoInject:R,cargo:W,cargoQueue:G,compose:K,concat:Z,concatLimit:Y,concatSeries:tt,constant:rt,detect:et,detectLimit:it,detectSeries:ut,dir:at,doUntil:ft,doWhilst:ct,each:lt,eachLimit:ht,eachOf:x,eachOfLimit:j,eachOfSeries:I,eachSeries:pt,ensureAsync:dt,every:mt,everyLimit:yt,everySeries:vt,filter:St,filterLimit:_t,filterSeries:kt,forever:Et,groupBy:Ot,groupByLimit:jt,groupBySeries:Lt,log:xt,map:A,mapLimit:X,mapSeries:T,mapValues:Ft,mapValuesLimit:At,mapValuesSeries:It,memoize:Tt,nextTick:Bt,parallel:$t,parallelLimit:Mt,priorityQueue:zt,queue:Nt,race:Rt,reduce:H,reduceRight:qt,reflect:Vt,reflectAll:Qt,reject:Gt,rejectLimit:Ht,rejectSeries:Jt,retry:Zt,retryable:tr,seq:J,series:rr,setImmediate:f,some:nr,someLimit:er,someSeries:ir,sortBy:ur,timeout:or,times:cr,timesLimit:ar,timesSeries:fr,transform:sr,tryEach:lr,unmemoize:hr,until:dr,waterfall:mr,whilst:pr,all:mt,allLimit:yt,allSeries:vt,any:nr,anyLimit:er,anySeries:ir,find:et,findLimit:it,findSeries:ut,flatMap:Z,flatMapLimit:Y,flatMapSeries:tt,forEach:lt,forEachSeries:pt,forEachLimit:ht,forEachOf:x,forEachOfSeries:I,forEachOfLimit:j,inject:H,foldl:H,foldr:qt,select:St,selectLimit:_t,selectSeries:kt,wrapSync:s,during:pr,doDuring:ct};r.default=yr}])});","extractedComments":[]}